%% abtex2-modelo-artigo.tex, v-1.9.6 laurocesar
%% Copyright 2012-2016 by abnTeX2 group at http://www.abntex.net.br/ 
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is the abnTeX2 team, led
%% by Lauro César Araujo. Further information are available on 
%% http://www.abntex.net.br/
%%
%% This work consists of the files abntex2-modelo-artigo.tex and
%% abntex2-modelo-references.bib
%%

% ------------------------------------------------------------------------
% ------------------------------------------------------------------------
% abnTeX2: Modelo de Artigo Acadêmico em conformidade com
% ABNT NBR 6022:2003: Informação e documentação - Artigo em publicação 
% periódica científica impressa - Apresentação
% ------------------------------------------------------------------------
% ------------------------------------------------------------------------

\documentclass[
    % -- opções da classe memoir --
    article,            % indica que é um artigo acadêmico
    11pt,               % tamanho da fonte
    oneside,            % para impressão apenas no recto. Oposto a twoside
    a4paper,            % tamanho do papel. 
    % -- opções da classe abntex2 --
    %chapter=TITLE,     % títulos de capítulos convertidos em letras maiúsculas
    %section=TITLE,     % títulos de seções convertidos em letras maiúsculas
    %subsection=TITLE,  % títulos de subseções convertidos em letras maiúsculas
    %subsubsection=TITLE % títulos de subsubseções convertidos em letras maiúsculas
    % -- opções do pacote babel --
    english,            % idioma adicional para hifenização
    brazil,             % o último idioma é o principal do documento
    sumario=tradicional,
    ]{abntex2}


% ---
% PACOTES
% ---

% ---
% Pacotes fundamentais 
% ---
\usepackage{lmodern}            % Usa a fonte Latin Modern
\usepackage[T1]{fontenc}        % Selecao de codigos de fonte.
\usepackage[utf8]{inputenc}     % Codificacao do documento (conversão automática dos acentos)
% \usepackage{indentfirst}        % Indenta o primeiro parágrafo de cada seção.
\usepackage{nomencl}            % Lista de simbolos
\usepackage{color}              % Controle das cores
\usepackage{graphicx}           % Inclusão de gráficos
\usepackage{microtype}          % para melhorias de justificação
% ---
        
% ---
% Pacotes adicionais, usados apenas no âmbito do Modelo Canônico do abnteX2
% ---
\usepackage{lipsum}             % para geração de dummy text
\usepackage{fancyvrb}
% ---
        
% ---
% Pacotes de citações
% ---
\usepackage[brazilian,hyperpageref]{backref}     % Paginas com as citações na bibl
\usepackage[alf]{abntex2cite}   % Citações padrão ABNT
% ---

% ---
% Configurações do pacote backref
% Usado sem a opção hyperpageref de backref
\renewcommand{\backrefpagesname}{Citado na(s) página(s):~}
% Texto padrão antes do número das páginas
\renewcommand{\backref}{}
% Define os textos da citação
\renewcommand*{\backrefalt}[4]{
    \ifcase #1 %
        Nenhuma citação no texto.%
    \or
        Citado na página #2.%
    \else
        Citado #1 vezes nas páginas #2.%
    \fi}%
% ---

% ---
% Informações de dados para CAPA e FOLHA DE ROSTO
% ---
\titulo{Relatório INE5429 - Segurança em Computação\\ 
        Pretty Good Privacy (PGP)}
\autor{Bruno Marques do Nascimento\thanks{brunomn95@gmail.com \hspace{1mm} - \hspace{1mm} Universidade Federal de Santa Catarina}}
\instituicao{Universidade Federal de Santa Catarina}
\local{Florianópolis - SC, Brasil}
\data{14 de Março de 2018}
% ---

% ---
% Configurações de aparência do PDF final

% alterando o aspecto da cor azul
\definecolor{blue}{RGB}{41,5,195}

% informações do PDF
\makeatletter
\hypersetup{
        %pagebackref=true,
        pdftitle={\@title}, 
        pdfauthor={\@author},
        pdfsubject={Modelo de artigo científico com abnTeX2},
        pdfcreator={LaTeX with abnTeX2},
        pdfkeywords={abnt}{latex}{abntex}{abntex2}{atigo científico}, 
        colorlinks=true,            % false: boxed links; true: colored links
        linkcolor=blue,             % color of internal links
        citecolor=blue,             % color of links to bibliography
        filecolor=magenta,              % color of file links
        urlcolor=blue,
        bookmarksdepth=4
}
\makeatother
% --- 

% ---
% compila o indice
% ---
\makeindex
% ---

% ---
% Altera as margens padrões
% ---
\setlrmarginsandblock{3cm}{3cm}{*}
\setulmarginsandblock{3cm}{3cm}{*}
\checkandfixthelayout
% ---

% --- 
% Espaçamentos entre linhas e parágrafos 
% --- 

% O tamanho do parágrafo é dado por:
\setlength{\parindent}{1.3cm}

% Controle do espaçamento entre um parágrafo e outro:
\setlength{\parskip}{0.2cm}  % tente também \onelineskip

% Espaçamento simples
\SingleSpacing

% ----
% Início do documento
% ----
\begin{document}

% Seleciona o idioma do documento (conforme pacotes do babel)
%\selectlanguage{english}
\selectlanguage{brazil}

% Retira espaço extra obsoleto entre as frases.
\frenchspacing 

% ----------------------------------------------------------
% ELEMENTOS PRÉ-TEXTUAIS
% ----------------------------------------------------------

%---
%
% Se desejar escrever o artigo em duas colunas, descomente a linha abaixo
% e a linha com o texto ``FIM DE ARTIGO EM DUAS COLUNAS''.
% \twocolumn[           % INICIO DE ARTIGO EM DUAS COLUNAS
%
%---
% página de titulo

\maketitle


% resumo em português
\begin{resumoumacoluna}
    Relatório de aula referente ao primeiro trabalho individual da disciplina INE5429 - Segurança em computação, com o objetivo de conhecer e utilizar o GPG (GNU Privacy Guard) que é uma alternativa GPL do aplicativo PGP de criptografia. Este documento visa responder as perguntas elencadas pelo professor ministrante da disciplina Ricardo Felipe Custódio na plataforma moodle.
 
 \vspace{\onelineskip}
 
\end{resumoumacoluna}

% ]                 % FIM DE ARTIGO EM DUAS COLUNAS
% ---

% ----------------------------------------------------------
% ELEMENTOS TEXTUAIS
% ----------------------------------------------------------
\textual

% ----------------------------------------------------------
% Introdução
% ----------------------------------------------------------
% \section*{Introdução}
% \addcontentsline{toc}{section}{Introdução}


% ----------------------------------------------------------
% Questão 1
% ----------------------------------------------------------
\section{Criar certificado pgp.}

Através do terminal utilizado o comando \texttt{gpg ----full--gen--key}, o passo a passo abaixo foi realizado e o seguinte certificado gerado:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
Kind of key:  RSA and RSA.
Keysize:      2048 bits.
Valid for:    180 days.
Key expires:  dom 09 set 2018 10:55:33 -03.
USER-ID:      Bruno Marques (ine5429) <brunomn95@gmail.com>
KEY-ID:       48B783E542BC3DE0
    
pub   rsa2048 2018-03-13 [SC] [expires: 2018-09-09]
      FCF80DBA20F4AF28F329261448B783E542BC3DE0
uid   Bruno Marques (ine5429) <brunomn95@gmail.com>
sub   rsa2048 2018-03-13 [E] [expires: 2018-09-09]
\end{Verbatim}

% ----------------------------------------------------------
% Questão 2
% ----------------------------------------------------------
\section{Crie um novo certificado PGP para este trabalho individual (Não use o teu certificado pois ele terá que ser revogado). Coloque esse certificado de testes no servidor PGP. Depois verifique seu status. Então, crie um certificado de revogação e revogue o certificado de testes.}

Um novo certificado para posterior revogação foi gerado com os atributos abaixo elencados:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
Kind of key:  RSA and RSA.
Keysize:      2048 bits.
Valid for:    180 days.
Key expires:  dom 09 set 2018 11:51:51 -03
USER-ID:      Bruno Marques (questao2-ine5429) <brunomn@gmail.com>
KEY-ID:       6E9ECD78A9CC5EBB

pub   rsa2048 2018-03-13 [SC] [expires: 2018-09-09]
      D5E5F581B6BCB811AAF4300A6E9ECD78A9CC5EBB
uid   Bruno Marques (questao2-ine5429) <brunomn@gmail.com>
sub   rsa2048 2018-03-13 [E] [expires: 2018-09-09]
\end{Verbatim}

Feito isto, o mesmo foi colocado no servidor PGP através do comando: \texttt{gpg ----keyserver keyserver.cais.rnp.br ----send-keys 6E9ECD78A9CC5EBB}. Gerando o seguinte output:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
gpg: sending key 6E9ECD78A9CC5EBB to hkp://keyserver.cais.rnp.br
\end{Verbatim}

Após enviar o certificado ao servidor foi verificado seu status atraveś do comando \texttt{gpg ----keyserver keyserver.cais.rnp.br ----search--keys 6E9ECD78A9CC5EBB}. Que gerou a saída abaixo:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
gpg: data source: http://keyserver.cais.rnp.br:11371
(1) Bruno Marques (questao2-ine5429) <brunomn@gmail.com>
    2048 bit RSA key 6E9ECD78A9CC5EBB, created: 2018-03-13, expires: 2018-09-09
Keys 1-1 of 1 for "6E9ECD78A9CC5EBB".
\end{Verbatim}

Em seguida foi criado um certificado de revogação através do comando: \texttt{gpg ----gen--revoke "Bruno Marques (questao2--ine5429)"}. Que gerou o seguinte certificado de revogação:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
ASCII armored output forced.
-----BEGIN PGP PUBLIC KEY BLOCK-----
Comment: This is a revocation certificate

iQEfBCABCAAJBQJaqAenAh0AAAoJEG6ezXipzF67e8kIALk9q9kybAmfokksqhQK
3bQXg3QAqszZkYZe8HqLsk/Ca5KLUfoZ/LzfXQ5vHHehaFOr1M+9ZiNrlpGZncwt
cMOsQJyUZyhLf5/V46AiGNG6xAEiQ7Nsxpbbi4Uq+jnf5IakqWY3pTii/PIihlFa
rKgya0Kw7NhOzJYfKu0pZ9A8g2e4TjK+xWf4Xk96FPnKmbOZcjf/vcQ/qHTcX4Hg
AdrP0xhRyMgBpxvfAOVjUanGy5rxoz1vllne4pyHx9sFJP7tjS9ICa9F86Ww8ik5
iNxBgbOkfGNA+K84ldNaDc1PjjIKbChINh/CZ3x2INBGJ4xuvW8OrQI4qM6LctLr
npk=
=fCkI
-----END PGP PUBLIC KEY BLOCK-----
Revocation certificate created.
\end{Verbatim}

Este certificado de revogação foi então salvo no arquivo \textbf{revog.txt} e utilizou-se o comando \texttt{gpg ----import  \textasciitilde /.gnupg/openpgp--revocs.d/revog.txt} para realizar a revogação desta chave e que posteriormente foi enviada ao servidor PGP, através do comando \texttt{gpg ----keyserver keyserver.cais.rnp.br ----send--keys 6E9ECD78A9CC5EBB}. Para verificar seu status utilizou-se novamento o comando \texttt{gpg ----keyserver keyserver.cais.rnp.br ----search--keys 6E9ECD78A9CC5EBB} que mostrou o certificado como revogado:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
gpg: data source: http://keyserver.cais.rnp.br:11371
(1) Bruno Marques (questao2-ine5429) <brunomn@gmail.com>
    2048 bit RSA key 6E9ECD78A9CC5EBB, created: 2018-03-13, expires: 2018-09-09 \textbf{(revoked)}
\end{Verbatim}



% ----------------------------------------------------------
% Questão 3
% ----------------------------------------------------------
\section{Pratique a revogação de certificados PGP. Assine um certificado qualquer PGP (de outra pessoa). E envie esse certificado para o servidor PGP. Depois verifique o status do certificado. E então, revogue a assinatura que você fez. Confira o resultado no servidor PGP. Faça um relatório do que você fez, incluindo o KeyID do certificado cuja assinatura você revogou.}

Foi importado um certificado para a máquina local através do comando \texttt{gpg ----recv--keys 54f950865065a318}. E então utilizados os comandos \texttt{gpg ----sign--key 54f950865065a318} e \texttt{gpg ----keyserver keyserver.cais.rnp.br ----send--keys 54f950865065a318} para respectivamente assiná-lo e enviá-lo para o servidor pgp. Para verificar os status foi utilizado o seguinte comando \texttt{gpg ----list--sigs 54f950865065a318} que resultou no output abaixo:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
pub   rsa4096 2014-09-22 [SCA] [expires: 2019-09-21]
      E805BAF5D4688A9ED6658B8C54F950865065A318
uid           [  full  ] Jean Martina <jean.martina@ufsc.br>
sig          FD3D4401F5343946 2015-03-19  [User ID not found]
sig          BF510D9287C98027 2015-03-20  [User ID not found]
sig          1CFC45B2CB3BCBEE 2015-03-20  [User ID not found]
sig          5DF66B47F48274D9 2015-03-27  [User ID not found]
sig          A40097C5149F62B3 2015-03-27  [User ID not found]
sig          A7E4BB4DDEA7DDF0 2015-04-16  [User ID not found]
sig 1        3AD79D3F318B7BA5 2017-08-16  [User ID not found]
sig        1 D84870658D9AA66A 2017-01-24  [User ID not found]
rev          3AD79D3F318B7BA5 2017-08-16  [User ID not found]
sig          C47D8F38399DE079 2015-03-20  [User ID not found]
sig          C7BC91E9273DD888 2015-03-21  [User ID not found]
sig 3        0F0F3FF23A2E6AB6 2015-04-15  [User ID not found]
sig 3        54F950865065A318 2014-09-22  Jean Martina <jean.martina@ufsc.br>
sig 3        54F950865065A318 2015-02-20  Jean Martina <jean.martina@ufsc.br>
sig          48B783E542BC3DE0 2018-03-14  Bruno Marques (ine5429) <brunomn95@gmail.com>
\end{Verbatim}

Para revogar a assinatura foi utilizado o comando \texttt{gpg ----edit--key 54f950865065a318} seguido de \texttt{revsig} para criar o certificado de revogação de assinatura. E por fim foi utilizado o comando \texttt{save} para salvar as edições na chave, que fora enviada novamente ao servidor \texttt{gpg ----keyserver keyserver.cais.rnp.br ----send--keys 54f950865065a318}. Em seguida verificou-se novamente seu status:

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]
pub   rsa4096 2014-09-22 [SCA] [expires: 2019-09-21]
      E805BAF5D4688A9ED6658B8C54F950865065A318
uid           [ unknown] Jean Martina <jean.martina@ufsc.br>
\textbf{rev          48B783E542BC3DE0 2018-03-14  Bruno Marques (ine5429) <brunomn95@gmail.com>}
sig          FD3D4401F5343946 2015-03-19  [User ID not found]
sig          BF510D9287C98027 2015-03-20  [User ID not found]
sig          1CFC45B2CB3BCBEE 2015-03-20  [User ID not found]
sig          5DF66B47F48274D9 2015-03-27  [User ID not found]
sig          A40097C5149F62B3 2015-03-27  [User ID not found]
sig          A7E4BB4DDEA7DDF0 2015-04-16  [User ID not found]
sig 1        3AD79D3F318B7BA5 2017-08-16  [User ID not found]
sig        1 D84870658D9AA66A 2017-01-24  [User ID not found]
rev          3AD79D3F318B7BA5 2017-08-16  [User ID not found]
sig          C47D8F38399DE079 2015-03-20  [User ID not found]
sig          C7BC91E9273DD888 2015-03-21  [User ID not found]
sig 3        0F0F3FF23A2E6AB6 2015-04-15  [User ID not found]
sig 3        54F950865065A318 2014-09-22  Jean Martina <jean.martina@ufsc.br>
sig 3        54F950865065A318 2015-02-20  Jean Martina <jean.martina@ufsc.br>
sig          48B783E542BC3DE0 2018-03-14  Bruno Marques (ine5429) <brunomn95@gmail.com>
\end{Verbatim}



% ----------------------------------------------------------
% Questão 4
% ----------------------------------------------------------
\section{O que é o anel de chaves privadas? Como este está estruturado? Na sua aplicação GPG onde este anel de chaves é armazenado? Quem pode ser acesso a esse porta chaves?}


% ----------------------------------------------------------
% Questão 5
% ----------------------------------------------------------
\section{Qual a diferença entre assinar uma chave local e assinar no servidor?}

A diferença é que ao assinar localmente, a chave só terá essa assinatura na máquina local e outros usuários não poderão visualizar a sua assinatura sobre esta chave, quando esta assinatura está no servidor, todos os usuários podem acessar o servidor e verificar as assinaturas que uma determinada chave recebeu.

% ----------------------------------------------------------
% Questão 6
% ----------------------------------------------------------
\section{O que é e como é organizado o banco de dados de confiabilidade?}


% ----------------------------------------------------------
% Questão 7
% ----------------------------------------------------------
\section{O que são e para que servem as sub-chaves?}

Sub-chaves são como chaves normais, porém elas estão automaticamente relacionadas a um par de chaves principal. Elas servem tanto para assinatura como paraa cifragem. Apesar de estarem realcionadas a um par de chaves principal elas podem ser armazenadas separadamente do par de chave principal, assim como serem revogadas independentemente.

% ----------------------------------------------------------
% Questão 8
% ----------------------------------------------------------
\section{Coloque sua foto (ou uma figura qualquer) que represente você em seu certificado GPG.}

Os seguintes comandos foram utilizados para isto: 
\begin{Verbatim}[commandchars=\\\{\}, fontsize=\footnotesize]
    \texttt{gpg --edit-key 42BC3DE0}
    \texttt{addphoto}
    \texttt{save}
    \texttt{gpg --keyserver keyserver.cais.rnp.br --send-keys 42BC3DE0}
\end{Verbatim}


% ----------------------------------------------------------
% Questão 9
% ----------------------------------------------------------
\section{O que é preciso para criar e manter um servidor de chaves GPG, sincronizado com os demais servidores existentes?}


% ----------------------------------------------------------
% Questão 10
% ----------------------------------------------------------
\section{Dê um exemplo de como tornar sigiloso um arquivo usando o GPG. Envie esse arquivo para um colega e que enviar para você outro arquivo cifrado. Você deve decifrar e recuperar o conteúdo original.}

Um exemplo de tornar um arquivo sigiloso é mostrado a seguir. Primeiramente é necessário ter a chave pública do destinatário localmente e para isso utilizou-se o comando  \texttt{gpg ----recv--key B461AD97}, feito isso cria-se o arquivo, por exemplo, "sigiloso.txt", que será cifrado para se tornar de fato sigiloso, para isso utiliza-se o seguinte comando \texttt{gpg ----encrypt ----recipient B461AD97 sigiloso.txt} que irpa gerar o arquivo cifrado "sigiloso.txt.gpg" que será enviado ao destinatário por e-mail (\texttt{johannwestphall@gmail.com}).

O arquivo que recebi tem o nome de "RelatorioSeg.gpg", para decifrar este arquivo e recuperar seu conteúdo original o seguinte comando foi utilizado \texttt{gpg ----decrypt RelatorioSeg.gpg} que revelou o conteúdo do arquivo, que consistia das questões em branco deste relatório. 

% ----------------------------------------------------------
% Questão 11
% ----------------------------------------------------------
\section{Dê um exemplo de como assinar um arquivo (assinatura anexada e outro com assinatura separada), usando o GPG. Envie uma mensagem assinada para um colega. Esse colega deve enviar para você outra mensagem assinada. Verifique se a assinatura está correta.}

Para assinar um arquivo com assinatura anexada foi utilizado o seguinte comando \texttt{gpg --s attach--sign.txt} que gerou o arquivo "attach--sign.txt.gpg" apartir do qual é possível fazer a verificação da assinatura do arquivo pelo comando \texttt{gpg ----verify attach--sign.txt.gpg}. Para assinatura separada o seguinte comando foi utilizado \texttt{gpg --b detach--sign.txt} que gerou o arquivo "detach--sign.txt.sig", para realizar a verificação da assinatura do documento é necessário utilizar o documento em texto puro e o arquivo assinado com o seguinte comando \texttt{gpg ----verify detach--sign.txt.sig detach--sign.txt}.

O arquivo recebido para verificação de assinatura foi o "aaaa", a verificação de assinatura foi feita com o seguinte comando \texttt{gpg ----verify } tendo como saída o texto abaixo.

\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\footnotesize]

\end{Verbatim}



% ---
% Finaliza a parte no bookmark do PDF, para que se inicie o bookmark na raiz
% ---
\bookmarksetup{startatroot}% 
% ---

% ---
% Conclusão
% ---
% \section*{Considerações finais}
% \addcontentsline{toc}{section}{Considerações finais}

% ----------------------------------------------------------
% ELEMENTOS PÓS-TEXTUAIS
% ----------------------------------------------------------
\postextual

% ----------------------------------------------------------
% Referências bibliográficas
% ----------------------------------------------------------
\nocite{GnuPrivacyGuardHowto}
\nocite{subkeys_debian}
\nocite{Stallings:2010:CNS:1824151}
\bibliography{bibliography}

\end{document}
